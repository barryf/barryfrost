{%- import '../macros/photo.njk' as photo %}
{%- macro context(context, contextLabel, helpers) %}

<div class="mb-4">
  {%- if context.properties %}
    <h2>
      {{ contextLabel }}
      {%- if context.properties.author %}
        <a href="{{ context.properties.author[0].properties.url[0] }}" class="font-bold text-yellow-600 hover:text-black" rel="noopener">
          {%- if context.properties.author[0].properties.photo %}
            <img src="{{ context.properties.author[0].properties.photo[0] }}" class="w-6 h-6 inline-block ml-2 mr-1 rounded-full">
          {%- endif %}
          {{ context.properties.author[0].properties.name[0] }}</a>&rsquo;s
      {%- else %}
        a
      {%- endif %}
      <a href="{{ context.properties.url[0] }}" class="font-bold text-yellow-600 hover:text-black" rel="noopener">
        post
      </a>
      on
      <a href="{{ urlHost(context.properties.url[0]) }}" class="font-bold text-yellow-600 hover:text-black" rel="noopener">
        <span class="w-3 h-3 inline-block">
          {{ helpers.iconFromUrl(context.properties.url[0]) }}
        </span>
      </a>
    </h2>
    <div class="mb-4 prose prose-sm">
      {{ helpers.contextContent(context) | safe }}
    </div>
    {%- if context.properties.photo %}
      <div class="mb-4">
        <ul>
          {%- for p in context.properties.photo %}
            <li>
              {{ photo.photo(p) | safe }}
            </li>
          {%- endfor %}
        </ul>
      </div>
    {%- endif %}
  {%- else %}
    <h2>{{ contextLabel }}</h2>
    <a href={{ context }} class="font-bold text-yellow-600 hover:text-black" rel="noopener">
        {{ context }}
    </a>
  {%- endif %}
</div>

{%- endmacro %}
